/* =========================
   GOV STYLE — PATIENT HISTORY
   โทนราชการ: ขาว-เขียวกรมฯ, ตัวอักษรคมชัด
   ========================= */

/* ---------- Base / Typography ---------- */
@font-face{
  font-family:'Sarabun';
  src:url('/fonts/sarabun/Sarabun-Regular.woff2') format('woff2');
  font-weight:400; font-display:swap;
}
@font-face{
  font-family:'Sarabun';
  src:url('/fonts/sarabun/Sarabun-SemiBold.woff2') format('woff2');
  font-weight:600; font-display:swap;
}
@font-face{
  font-family:'Sarabun';
  src:url('/fonts/sarabun/Sarabun-Bold.woff2') format('woff2');
  font-weight:700; font-display:swap;
}

.container{
  max-width:1120px;
  margin:0 auto;
  padding:20px 20px 28px;
  background:#fff;
  font-family:'Sarabun','TH SarabunPSK',system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial,sans-serif;
  color:#0f172a; /* slate-900 */
}

/* ---------- Page Title ---------- */
.pageTitle{
  display:flex; align-items:center; gap:10px;
  padding-bottom:10px; margin:0 0 18px;
  border-bottom:3px solid #146c43; /* เขียวกรมฯเข้ม */
  font-size:1.25rem; font-weight:700; letter-spacing:.1px;
  color:#0b3d2e;
}
.titleIcon{ width:22px; height:22px; color:#146c43; }

/* ---------- Cards / Sections ---------- */
.card{
  background:#fff;
  border:1px solid #e6e9ef;
  border-radius:12px;
  padding:14px 14px 16px;
  box-shadow:0 1px 0 rgba(16,24,40,.02);
  margin-bottom:14px;
}
.sectionTitle{ font-weight:700; color:#0f172a; margin:4px 0 8px; }
.sectionTitleSub{ font-weight:600; color:#1f2937; margin:0 0 6px; }

/* ---------- Grid ---------- */
.row{ display:grid; grid-template-columns:repeat(12,1fr); gap:12px; }
.col12{ grid-column:span 12; }
.col4{ grid-column:span 4; }
.col3{ grid-column:span 3; }
.col2{ grid-column:span 2; }
.alignEnd{ align-self:end; }

/* ====== Dropdown ====== */
.dropdown { position: relative; }

.comboButton {
  width: 100%;
  border: 1px solid #d1d5db;
  background: #fff;
  border-radius: 10px;
  padding: 10px 12px;
  text-align: left;
  cursor: pointer;
}

.comboPlaceholder { color: #9ca3af; }

.comboMain {
  display: block;
  font-weight: 600;
  font-size: 14px;
  margin-bottom: 4px;
}

.comboSubs {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.comboPanel {
  position: absolute;
  z-index: 50;
  top: calc(100% + 6px);
  left: 0;
  right: 0;
  background: #fff;
  border: 1px solid #d1d5db;
  border-radius: 12px;
  box-shadow: 0 10px 20px rgba(0,0,0,.08);
  padding: 8px;
}

.comboSearchRow {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 8px;
  border: 1px solid #e5e7eb;
  border-radius: 10px;
  margin: 6px 6px 8px 6px;
}
.comboSearchIcon { width: 16px; height: 16px; color: #6b7280; }
.comboSearch {
  flex: 1;
  border: none;
  outline: none;
  font-size: 14px;
}

.comboList {
  max-height: 360px;
  overflow: auto;
  margin: 0;
  padding: 4px;
  list-style: none;
}

.comboEmpty {
  padding: 12px;
  color: #6b7280;
  text-align: center;
}

.comboItem {
  padding: 10px 10px 8px 10px;
  border-radius: 10px;
  cursor: pointer;
}
.comboItem:hover { background: #f3f4f6; }
.comboItemActive { background: #eef2ff; }

.itemTop { display: flex; gap: 8px; align-items: baseline; margin-bottom: 6px; }
.itemTime { color: #6b7280; font-size: 12px; }
.itemName { font-weight: 600; font-size: 14px; }

.itemBottom { display: flex; flex-wrap: wrap; gap: 6px; }

/* ====== Chips & Badges ====== */
.chip{
  display:inline-block; padding:3px 10px; border-radius:999px;
  border:1px solid #d8dee9; background:#f8fafc; color:#0f172a;
  font-size:.9rem; margin:0 6px 6px 0;
}

.badgeMore{
  display:inline-flex; align-items:center; height:22px;
  padding:0 10px; border-radius:999px;
  background:#e0e7ff; color:#1e40af; font-weight:600;
  font-size:12px; line-height:22px; vertical-align:middle; margin-left:8px;
}

/* ---------- Form Fields ---------- */
.label{
  display:block; margin:0 0 6px; color:#344155; font-size:.95rem; font-weight:600;
}
.inputWithIcon{ position:relative; }
.inputIcon{
  position:absolute; left:12px; top:50%; transform:translateY(-50%);
  width:18px; height:18px; color:#77819a; pointer-events:none;
}
.field{
  width:100%; padding:10px 12px; border:1px solid #cfd5e1; border-radius:10px;
  background:#fff; font-size:1rem; line-height:1.2; outline:none;
  transition:border-color .15s ease, box-shadow .15s ease;
}
.inputWithIcon .field{ padding-left:38px; }
.field:hover{ border-color:#98a4ba; }
.field:focus{
  border-color:#198754;
  box-shadow:0 0 0 3px rgba(25,135,84,.16);
}

/* ---------- Buttons ---------- */
.btn{
  display:inline-flex; align-items:center; justify-content:center; gap:8px;
  padding:10px 14px; border-radius:10px; border:1px solid #cfd5e1; background:#fff;
  font-size:1rem; cursor:pointer; white-space:nowrap;
  transition:background-color .15s ease, border-color .15s ease, color .15s ease;
}
.btn:disabled{ opacity:.6; cursor:not-allowed; }
.btnPrimary{
  background:#198754; border-color:#198754; color:#fff; font-weight:700;
}
.btnPrimary:hover:not(:disabled){ background:#157347; border-color:#157347; }
.btnPrimary:focus-visible{ outline:none; box-shadow:0 0 0 3px rgba(25,135,84,.22); }

/* ปุ่ม fixed width (กันสั่น) + ข้อความสลับขณะโหลด */
.btnFixed{ width:172px; }
.btnLoading{ min-width:172px; }
.btnLabel{ position:relative; display:block; line-height:1; height:1em; }
.labelIdle,.labelBusy{
  position:absolute; inset:0; display:flex; align-items:center; justify-content:center;
  transition:opacity .15s ease;
}
.labelBusy{ opacity:0; }
.btnLabel[data-loading="1"] .labelIdle{ opacity:0; }
.btnLabel[data-loading="1"] .labelBusy{ opacity:1; }

/* ---------- Table (ราชการอ่านง่าย) ---------- */
.tableWrap{ width:100%; overflow-x:auto; -webkit-overflow-scrolling:touch; }

.table{
  width:100%; border-collapse:separate; border-spacing:0;
  background:#fff; border:1px solid #e6e9ef; border-radius:12px;
  overflow:hidden;
}
.table thead th{
  background:#146c43; color:#fff; padding:12px 12px; text-align:left;
  font-weight:700; letter-spacing:.1px; font-size:.98rem;
  position:sticky; top:0; z-index:1;  /* header sticky เมื่อเลื่อน */
}
.table tbody td{
  padding:10px 12px; vertical-align:top; border-top:1px solid #eef1f6;
  color:#111827; font-size:.97rem;
}
.table tbody tr:nth-child(odd) td{ background:#fbfdff; } /* zebra อ่อนๆ */
.table tbody tr:hover td{ background:#f3faf6; }         /* hover เขียวอ่อนราชการ */
.tableEmpty{ text-align:center; color:#6b7280; padding:16px; }

/* ---------- Pagination ---------- */
.pagination{ margin-top:12px; display:flex; flex-wrap:wrap; gap:8px; }
.pageBtn{ padding:8px 12px; border:1px solid #cfd5e1; border-radius:8px; background:#fff; }
.pageBtn:hover{ background:#f3f4f6; }
.pageBtnActive{ background:#e8f5ee; border-color:#198754; color:#0b3d2e; font-weight:700; }

/* ---------- Utilities ---------- */
.block{ display:block; }
.blockTop{ margin-top:8px; }
.muted{ color:#6b7280; font-size:.92rem; }
.hr{
  border:0; height:1px; background:linear-gradient(90deg,#e7ebf3,rgba(231,235,243,0));
  margin:10px 0 14px;
}
.errorText{ color:#b91c1c; margin-top:8px; }

/* ---------- Sticky search button (ขอบการ์ด) ---------- */
.stickySearch{ position:sticky; top:12px; align-self:flex-end; z-index:2; }

/* baseline ข้อความหน้าป้ายเพิ่มเติม */
.symText{
  display:inline-flex; align-items:center;
  height:22px; line-height:22px; vertical-align:middle;
}

/* =========================
   PATIENT DETAIL (Readable blocks + Timeline)
   ========================= */
.detailCard{
  border:1px solid #e6e9ef;
  border-radius:12px;
  background:#fff;
  padding:16px 18px;
  box-shadow:0 1px 0 rgba(16,24,40,.02);
  margin-bottom:14px;
}

.detailHeader{
  display:flex; align-items:flex-end; gap:12px;
  padding-bottom:8px; margin-bottom:12px;
  border-bottom:2px solid #146c43;
}
.detailHeader h3{
  margin:0; font-size:1.05rem; font-weight:700; color:#0b3d2e; letter-spacing:.2px;
}
.detailMeta{ margin-left:auto; color:#475569; font-size:.92rem; }

.kvGrid{
  display:grid; grid-template-columns:180px 1fr;
  row-gap:8px; column-gap:16px; margin:4px 0 6px;
}
.kvGrid dt{ color:#334155; font-weight:600; line-height:1.35; }
.kvGrid dd{ margin:0; color:#0f172a; line-height:1.5; }

.sep{
  height:1px; background:linear-gradient(90deg,#edf2f7,rgba(237,242,247,0));
  margin:12px 0; border:0;
}

.blockTitle{ font-weight:700; color:#0f172a; margin:2px 0 8px; }
.noteMuted{ color:#64748b; font-size:.94rem; }

/* Timeline */
.timeline{ position:relative; padding-left:16px; margin:8px 0 4px; }
.timeline::before{
  content:""; position:absolute; left:6px; top:0; bottom:0;
  width:2px; background:#eef1f6;
}
.tItem{
  position:relative; padding:10px 12px 10px 16px;
  border:1px solid #e6e9ef; border-radius:10px; background:#fff;
  margin:10px 0 10px 6px;
}
.tItem::before{
  content:""; position:absolute; left:-11px; top:14px;
  width:9px; height:9px; border-radius:50%;
  background:#146c43; box-shadow:0 0 0 3px #e8f5ee;
}
.tHead{ display:flex; flex-wrap:wrap; gap:8px; align-items:center; margin-bottom:6px; }
.tClinic{ font-weight:700; color:#0b3d2e; }
.tTime{ color:#64748b; font-size:.88rem; }
.tBody{ color:#0f172a; line-height:1.5; }

/* ป้ายเฉพาะใน timeline */
.tag{
  display:inline-block; padding:2px 8px; border-radius:999px;
  background:#f3f4f6; border:1px solid #e5e7eb; font-size:.86rem; color:#111827;
}
.tagAccent{
  background:#e8f5ee; border-color:#cce9dd; color:#0b3d2e; font-weight:600;
}

/* ====== Patient detail: key–value (2 คอลัมน์) ====== */
.grid2 {
  display: grid;
  grid-template-columns: 180px 1fr;
  gap: 8px 16px;
  margin: 6px 0 2px;
}
.grid2 > div {
  line-height: 1.55;
  color: #0f172a;
}
.grid2 > div:nth-child(odd) {
  color: #334155;         /* คีย์ */
  font-weight: 600;
}

/* ----- รายละเอียดเคส: key–value 2 คอลัมน์ ----- */
.grid2{
  display:grid;
  grid-template-columns:180px 1fr;
  gap:8px 16px;
  margin:6px 0 2px;
}
.grid2 > div{
  line-height:1.55;
  color:#0f172a;
}
.grid2 > div:nth-child(odd){
  color:#334155;
  font-weight:600;
}

/* ----- รายการประเมิน: การ์ดสั้นอ่านง่าย ----- */
.qrList{ margin-top:8px; }

.qrItem{
  border:1px solid #e6e9ef;
  border-radius:10px;
  background:#fff;
  padding:12px 14px;
  margin:10px 0;
  box-shadow:0 1px 0 rgba(16,24,40,.02);
}

.qrRowTop{
  display:flex;
  align-items:center;
  gap:10px;
  margin-bottom:4px;
}
.qrTitle{
  font-weight:700;
  color:#0b3d2e;
  font-size:1rem;
  line-height:1.35;
  flex:1 1 auto;
  min-width:0;
}
.qrBadges{ display:flex; gap:6px; }
.qrBadge{
  display:inline-flex; align-items:center; height:20px;
  padding:0 8px; border-radius:999px; font-size:11px; font-weight:700;
}
.qrBadgeType{ background:#eef2ff; color:#1e40af; }
.qrBadgeRefer{ background:#e8f5ee; color:#0b3d2e; }

.qrMeta{
  color:#64748b;
  font-size:.9rem;
  margin-bottom:6px;
}

.qrDetail{
  color:#0f172a; line-height:1.55;
}
.qrDetail b{ color:#111827; }

/* ลำดับรายการ (วงกลมตัวเลข) */
.qrIndex{
  flex-shrink:0;
  width:28px; height:28px;
  border-radius:50%;
  background:#146c43;  /* เขียวกรมฯ */
  color:#fff; font-weight:700; font-size:13px;
  display:flex; align-items:center; justify-content:center;
}

/* จัด layout แถวบนให้รองรับเลข */
.qrRowTop{
  display:flex; align-items:center; gap:10px;
  margin-bottom:4px;
}
.qrTitle{ flex:1 1 auto; min-width:0; }

/* เส้นคั่นอ่อนระหว่างส่วน */
.hr{ border:0; height:1px; background:linear-gradient(90deg,#e7ebf3,rgba(231,235,243,0)); margin:10px 0 14px; }

/* =========================
   RESPONSIVE
   ========================= */

/* iPad แนวนอน 768–1024px */
@media (min-width:768px) and (max-width:1024px){
  .container{ padding:22px; }
  .row{ gap:14px; }
  .col4,.col3,.col2{ grid-column:span 6; }
  .col12{ grid-column:span 12; }
  .pageTitle{ font-size:1.2rem; padding-bottom:12px; }
  .titleIcon{ width:24px; height:24px; }
  .field,.btn{ min-height:44px; font-size:1rem; }
  .table thead th{ padding:14px 12px; white-space:nowrap; }
  .table tbody td{ padding:12px 12px; white-space:nowrap; }
  .grid2 { grid-template-columns: 1fr; }
}

/* iPad แนวตั้ง (≤ 820px) — ช่องค้นหาเรียงชัด + รายละเอียดพับคอลัมน์ */
@media (min-width:768px) and (max-width:820px){
  .col4{ grid-column:span 12; } /* CID เต็มแถว */
  .col3{ grid-column:span 6; }  /* ช่วงเวลา/เริ่ม */
  .col2{ grid-column:span 6; }  /* สิ้นสุด/ปุ่ม */
  .pageTitle{ font-size:1.15rem; }
  .kvGrid{ grid-template-columns:1fr; }
  .grid2{ grid-template-columns:1fr; }
  .qrIndex{ width:24px; height:24px; font-size:12px; }
  .qrRowTop{ flex-wrap:wrap; gap:6px 8px; }
  .qrBadges{ order:2; }
}

/* Mobile < 640px */
@media (max-width:640px){
  .row{ gap:10px; }
  .field,.btn{ min-height:44px; font-size:1rem; }
  .btnFixed,.btnLoading{ width:100%; }
  .pageBtn{ min-width:38px; min-height:38px; }
  .table thead th{ font-size:.95rem; }
  .table tbody td{ font-size:.95rem; }
  .kvGrid{ grid-template-columns:1fr; }
}
